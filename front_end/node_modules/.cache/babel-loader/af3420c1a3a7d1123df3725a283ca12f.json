{"ast":null,"code":"var _jsxFileName = \"/Users/macadmin/Desktop/praj/src/components/customer/productalone.js\";\nimport React from \"react\";\nimport CNav from './Nav';\nimport './c_home.css';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport Sidenav from \"./sidenav\";\nvar id, s1, s2, cid;\nconst donor = {\n  width: '100%',\n  height: '100%',\n  backgroundColor: '#dcdcdc'\n};\n\nclass productalone extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.reqquant = event => {\n      this.setState({\n        reqquant: event.target.value\n      });\n    };\n\n    this.aprice = event => {\n      this.setState({\n        aprice: event.target.value\n      });\n    };\n\n    id = this.props.match.params.id;\n    cid = sessionStorage.getItem(\"id\");\n    console.log(id);\n    this.state = {\n      cp: [],\n      aprice: null,\n      reqquant: null,\n      email: null,\n      name: \"Name\",\n      feedback: \"Thanks For buying\"\n    };\n    this.reqquant = this.reqquant.bind(this);\n    this.aprice = this.aprice.bind(this);\n    this.buyproduct = this.buyproduct.bind(this);\n    this.cart = this.cart.bind(this);\n  }\n\n  componentDidMount() {\n    this.singleProduct();\n    this.getEmail();\n  }\n\n  getEmail() {\n    const url = \"http://localhost:9000/getEmail\";\n    var body = {\n      id: sessionStorage.getItem(\"id\")\n    };\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    headers.append('Accept', 'application/json');\n    headers.append('Access-Control-Allow-origin', url);\n    headers.append('Access-Control-Allow-Credentials', 'true');\n    headers.append('POST', 'GET');\n    fetch(url, {\n      headers: headers,\n      method: 'POST',\n      body: JSON.stringify(body)\n    }).then(response => {\n      return response.json();\n    }).then(res => {\n      this.setState({\n        email: res.email\n      });\n      console.log(this.state.email, typeof this.state.email);\n    });\n  }\n\n  singleProduct() {\n    const url = \"http://localhost:9000/singleproduct\";\n    var body = {\n      id: id\n    };\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    headers.append('Accept', 'application/json');\n    headers.append('Access-Control-Allow-origin', url);\n    headers.append('Access-Control-Allow-Credentials', 'true');\n    headers.append('POST', 'GET');\n    fetch(url, {\n      headers: headers,\n      method: 'POST',\n      body: JSON.stringify(body)\n    }).then(response => {\n      return response.json();\n    }).then(res => {\n      this.setState({\n        cp: res\n      });\n      console.log(this.state.cp);\n      console.log(s1, s2);\n    });\n  }\n\n  buyproduct(event) {\n    event.preventDefault();\n    console.log(this.state.reqquant, this.state.aprice);\n    console.log(this.state.cp.quant);\n    if (this.state.aprice < this.state.cp.nprice) alert(\"Entered agreed price should be greater than or equal to nominal price\");else if (this.state.reqquant > this.state.cp.quant) alert(\"Entered quantity should be less than or equal to availability\");else {\n      var body = {\n        pid: id,\n        cid: cid,\n        aprice: this.state.aprice,\n        quant: this.state.cp.quant,\n        nquant: this.state.reqquant\n      };\n      const url = \"http://localhost:9000/buyproduct\";\n      let headers = new Headers();\n      headers.append('Content-Type', 'application/json');\n      headers.append('Accept', 'application/json');\n      headers.append('Access-Control-Allow-origin', url);\n      headers.append('Access-Control-Allow-Credentials', 'true');\n      headers.append('POST', 'GET');\n      fetch(url, {\n        headers: headers,\n        method: 'POST',\n        body: JSON.stringify(body)\n      }).then(response => {\n        if (response.ok) {\n          const templateId = 'template_ZCLa2fD8';\n          this.sendFeedback(templateId, {\n            message_html: this.state.feedback,\n            from_name: this.state.name,\n            to_name: this.state.email\n          });\n          alert(\"Details submitted.. Thank You For Purchasing..\");\n        }\n      });\n    }\n  }\n\n  sendFeedback(templateId, variables) {\n    window.emailjs.send('gmail', templateId, variables).then(res => {\n      console.log('Email successfully sent!');\n    }) // Handle errors here however you like, or use a React error boundary\n    .catch(err => console.error('Oh well, you failed. Here some thoughts on the error that occured:', err));\n    window.location.reload(false);\n  }\n\n  cart(event) {\n    event.preventDefault();\n    console.log(this.state.reqquant, this.state.aprice);\n    console.log(this.state.cp.quant); //console.log(this.state.cp.quant)\n\n    if (this.state.aprice < this.state.cp.nprice) alert(\"Entered agreed price should be greater than or equal to nominal price\");else if (this.state.reqquant > this.state.cp.quant) alert(\"Entered quantity should be less than or equal to availability\");else {\n      var body = {\n        pid: id,\n        cid: cid,\n        aprice: this.state.aprice,\n        quant: this.state.cp.quant,\n        nquant: this.state.reqquant\n      };\n      const url = \"http://localhost:9000/cartproduct\";\n      let headers = new Headers();\n      headers.append('Content-Type', 'application/json');\n      headers.append('Accept', 'application/json');\n      headers.append('Access-Control-Allow-origin', url);\n      headers.append('Access-Control-Allow-Credentials', 'true');\n      headers.append('POST', 'GET');\n      fetch(url, {\n        headers: headers,\n        method: 'POST',\n        body: JSON.stringify(body)\n      }).then(response => {\n        if (response.ok) {\n          alert(\"Details submitted.. Added to cart..\");\n          window.location.reload(false);\n        }\n      });\n    }\n  }\n\n  render() {\n    s1 = '/productimages/' + this.state.cp.img1;\n    s2 = '/productimages/' + this.state.cp.img2;\n    return React.createElement(\"div\", {\n      style: donor,\n      class: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(CNav, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }), React.createElement(Sidenav, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"productalone\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"div_left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, this.state.cp.pname)), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: s1,\n      width: \"600px\",\n      height: \"600px\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"div_right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      class: \"productalonetable\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"Nominal Price \")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, \"Rs.\", this.state.cp.nprice))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, \"Availabitlity \")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, this.state.cp.quant))), React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, \"Description \")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, this.state.cp.des)))), React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"Required Quantity\"), React.createElement(\"input\", {\n      type: \"text\",\n      class: \"producttext\",\n      value: this.state.reqquant,\n      onChange: this.reqquant,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, \"Agreed Price\"), React.createElement(\"input\", {\n      type: \"text\",\n      class: \"producttext\",\n      value: this.state.aprice,\n      onChange: this.aprice,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.buyproduct,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, \"Buy\"), \"\\xA0\\xA0\\xA0\", React.createElement(\"button\", {\n      onClick: this.cart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \"AddToCart\")))));\n  }\n\n}\n\nexport default productalone;","map":{"version":3,"sources":["/Users/macadmin/Desktop/praj/src/components/customer/productalone.js"],"names":["React","CNav","BrowserRouter","Route","Sidenav","id","s1","s2","cid","donor","width","height","backgroundColor","productalone","Component","constructor","props","reqquant","event","setState","target","value","aprice","match","params","sessionStorage","getItem","console","log","state","cp","email","name","feedback","bind","buyproduct","cart","componentDidMount","singleProduct","getEmail","url","body","headers","Headers","append","fetch","method","JSON","stringify","then","response","json","res","preventDefault","quant","nprice","alert","pid","nquant","ok","templateId","sendFeedback","message_html","from_name","to_name","variables","window","emailjs","send","catch","err","error","location","reload","render","img1","img2","pname","des"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport CNav from './Nav';\nimport './c_home.css'\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport Sidenav from \"./sidenav\"\n\nvar id,s1,s2,cid;\nconst donor ={\n  width: '100%',\n  height: '100%',\n  backgroundColor: '#dcdcdc',\n}\nclass productalone extends React.Component {\n    constructor(props) {\n      super(props);\n        id=this.props.match.params.id;\n        cid=sessionStorage.getItem(\"id\");\n      console.log(id)\n      this.state={\n        cp:[],\n        aprice:null,\n        reqquant:null,\n        email:null,\n        name:\"Name\",\n        feedback:\"Thanks For buying\"\n        \n      }\n      this.reqquant = this.reqquant.bind(this)\n      this.aprice = this.aprice.bind(this)\n      this.buyproduct = this.buyproduct.bind(this)\n      this.cart = this.cart.bind(this)\n    }\n\n    reqquant=event=>{\n      this.setState({\n        reqquant: event.target.value\n      });\n    }\n    aprice=event=>{\n      this.setState({\n        aprice: event.target.value\n      });\n      \n    }\n\n    componentDidMount(){\n      this.singleProduct();\n      this.getEmail();\n    }\n\n    getEmail(){\n      const url = \"http://localhost:9000/getEmail\";\n       var body={id:sessionStorage.getItem(\"id\")}\n        let headers = new Headers();\n        headers.append('Content-Type','application/json');\n        headers.append('Accept','application/json');\n\n        headers.append('Access-Control-Allow-origin',url);\n        headers.append('Access-Control-Allow-Credentials','true');\n\n        headers.append('POST','GET');\n        \n         fetch(url,{\n            headers:headers,\n            method: 'POST',\n            body: JSON.stringify(body)\n            })\n            .then(response =>{return response.json()})\n            .then(res=>{this.setState({email:res.email})\n            console.log(this.state.email,typeof(this.state.email))\n            \n\n                \n        })\n    }\n    singleProduct(){\n      const url = \"http://localhost:9000/singleproduct\";\n       var body={id:id}\n        let headers = new Headers();\n        headers.append('Content-Type','application/json');\n        headers.append('Accept','application/json');\n\n        headers.append('Access-Control-Allow-origin',url);\n        headers.append('Access-Control-Allow-Credentials','true');\n\n        headers.append('POST','GET');\n        \n         fetch(url,{\n            headers:headers,\n            method: 'POST',\n            body: JSON.stringify(body)\n            })\n            .then(response =>{return response.json()})\n            .then(res=>{this.setState({cp:res})\n            console.log(this.state.cp)\n            \n            console.log(s1,s2)\n                \n        })\n    }\n    buyproduct(event){\n      event.preventDefault();\n      console.log(this.state.reqquant,this.state.aprice)\n      console.log(this.state.cp.quant)\n      if(this.state.aprice < this.state.cp.nprice)\n        alert(\"Entered agreed price should be greater than or equal to nominal price\")\n      else if(this.state.reqquant > this.state.cp.quant)\n        alert(\"Entered quantity should be less than or equal to availability\")\n      else{\n        var body = {\n            pid: id,\n            cid: cid,\n            aprice: this.state.aprice,\n            quant: this.state.cp.quant,\n            nquant: this.state.reqquant,\n        }\n        const url = \"http://localhost:9000/buyproduct\";\n        let headers = new Headers();\n    \n        headers.append('Content-Type','application/json');\n        headers.append('Accept','application/json');\n    \n        headers.append('Access-Control-Allow-origin',url);\n        headers.append('Access-Control-Allow-Credentials','true');\n    \n        headers.append('POST','GET');\n    \n        fetch(url, {\n          headers:headers,\n          method: 'POST',\n          body: JSON.stringify(body)\n        })\n        .then(response => {if(response.ok){\n          const templateId = 'template_ZCLa2fD8';\n\n          this.sendFeedback(templateId, {message_html: this.state.feedback, from_name: this.state.name, to_name: this.state.email})\n\n            alert(\"Details submitted.. Thank You For Purchasing..\");\n            \n          }\n        })\n        \n      }\n    }\n\n    sendFeedback (templateId, variables) {\n      window.emailjs.send(\n      'gmail', templateId,\n      variables\n      ).then(res => {\n          console.log('Email successfully sent!')\n      })\n      // Handle errors here however you like, or use a React error boundary\n      .catch(err => console.error('Oh well, you failed. Here some thoughts on the error that occured:', err))\n      window.location.reload(false);\n    }\n\n    cart(event){\n      event.preventDefault();\n      console.log(this.state.reqquant,this.state.aprice)\n      console.log(this.state.cp.quant)\n      //console.log(this.state.cp.quant)\n      if(this.state.aprice < this.state.cp.nprice)\n        alert(\"Entered agreed price should be greater than or equal to nominal price\")\n      else if(this.state.reqquant > this.state.cp.quant)\n        alert(\"Entered quantity should be less than or equal to availability\")\n      else{\n        var body = {\n            pid: id,\n            cid: cid,\n            aprice: this.state.aprice,\n            quant: this.state.cp.quant,\n            nquant: this.state.reqquant,\n        }\n        const url = \"http://localhost:9000/cartproduct\";\n        let headers = new Headers();\n    \n        headers.append('Content-Type','application/json');\n        headers.append('Accept','application/json');\n    \n        headers.append('Access-Control-Allow-origin',url);\n        headers.append('Access-Control-Allow-Credentials','true');\n    \n        headers.append('POST','GET');\n    \n        fetch(url, {\n          headers:headers,\n          method: 'POST',\n          body: JSON.stringify(body)\n        })\n        .then(response => {if(response.ok){\n              alert(\"Details submitted.. Added to cart..\");\n            window.location.reload(false);\n          }\n        })\n        \n      }\n    }\n\n  \n    render() {\n      s1='/productimages/'+this.state.cp.img1\n      s2='/productimages/'+this.state.cp.img2\n      return (\n        <div style={donor} class=\"main\">\n                <CNav/>\n                <Sidenav/>\n                <div class=\"productalone\">\n                    <div className=\"div_left\">\n                        <h2><b>{this.state.cp.pname}</b></h2><br/>\n                        <img src={s1} width=\"600px\" height=\"600px\"/><br/><br/>\n                        {/* <img src={s2} width=\"400px\" height=\"400px\"/> */}\n                    </div>\n                    \n                    <div class=\"div_right\">\n                      \n                      <table class=\"productalonetable\">\n                      <tr><td><h3>Nominal Price </h3></td><td><h3>Rs.{this.state.cp.nprice}</h3></td></tr>\n                        <tr><td><h3>Availabitlity </h3></td><td><h3>{this.state.cp.quant}</h3></td></tr>\n                        <tr><td><h3>Description </h3></td><td><h3>{this.state.cp.des}</h3></td></tr> \n                      </table>\n                         \n                      <form>  \n                            {/* <h2>Description</h2><br/><h3>{this.state.cp.des}</h3>\n                            <h2>Availability</h2><br/><h3>{this.state.cp.quant}</h3>\n                            <h2>Nominal price</h2><br/><h3>{this.state.cp.nprice}</h3> */}\n                            <h2>Required Quantity</h2><input type=\"text\" class=\"producttext\" value={this.state.reqquant} onChange={this.reqquant} required/>\n                            <h2>Agreed Price</h2><input type=\"text\" class=\"producttext\" value={this.state.aprice} onChange={this.aprice} required/><br/>\n                            <button onClick={this.buyproduct}>Buy</button>&nbsp;&nbsp;&nbsp;\n                            <button onClick={this.cart}>AddToCart</button>\n                      </form>\n                    </div>\n                </div>\n        </div>\n        \n      );\n    }\n  }\n  \n  export default productalone;\n  "]},"metadata":{},"sourceType":"module"}